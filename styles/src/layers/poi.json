[
    {
        "id": "poi-without-name",
        "type": "symbol",
        "source": "%source%",
        "source-layer": "poi",
	"min-zoom": 14,
        "filter": [
	    "all",
	    ["!", ["has", "name"]],
            ["any",
	     [">", ["zoom"], 17],
             ["<=",
              ["number", ["get", "rank"], 100],
              ["^", 4, ["-", ["zoom"], 14]]
             ]
	    ]
        ],
        "layout": {
            "icon-image": ["coalesce",
			   ["image", ["concat", ["get", "class"], "_", ["get", "subclass"], "-11"]],
			   ["image", ["concat", ["get", "subclass"], "-11"]],
			   ["image", ["concat", ["get", "class"], "-11"]],
			   ["image", "dot-11"]]
        }
    },
    {
        "id": "poi-with-name",
        "type": "symbol",
        "source": "%source%",
        "source-layer": "poi",
	"min-zoom": 14,
        "filter": [
	    "all",
	    ["has", "name"],
            ["any",
	     [">", ["zoom"], 17],
             ["<=",
              ["number", ["get", "rank"], 100],
              ["^", 4, ["-", ["zoom"], 14]]
             ]
	    ]
        ],
        "layout": {
            "text-padding": 2,
            "text-font": [
                "Noto Sans Bold"
            ],
            "text-anchor": "top",
            "icon-image": ["coalesce",
			   ["image", ["concat", ["get", "class"], "_", ["get", "subclass"], "-11"]],
			   ["image", ["concat", ["get", "subclass"], "-11"]],
			   ["image", ["concat", ["get", "class"], "-11"]],
			   ["image", "dot-11"]],
            "text-field": "{%name%}",
            "text-offset": [
                0,
                0.6
            ],
            "text-optional": true,
            "text-size": %size_medium%,
            "text-max-width": 9
        },
        "paint": {
            "text-halo-blur": 0.5,
            "text-color": "%poi_text%",
            "text-halo-width": 1,
            "text-halo-color": "%poi_halo%"
        }
    }
]
